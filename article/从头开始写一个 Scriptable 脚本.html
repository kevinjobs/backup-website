<!DOCTYPE html><html lang="zh"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/e4e61c9bdedd446c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e4e61c9bdedd446c.css" data-n-g=""/><link rel="preload" href="/_next/static/css/1eb63af5c7456abc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1eb63af5c7456abc.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-540493d02c92e27d.js" defer=""></script><script src="/_next/static/chunks/main-d92ae55093a32c2f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-72890ec73e75b7e6.js" defer=""></script><script src="/_next/static/chunks/pages/article/%5Bid%5D-079c1bff615b6abc.js" defer=""></script><script src="/_next/static/DWpsn8_Oa9RwJVhd1Lj8m/_buildManifest.js" defer=""></script><script src="/_next/static/DWpsn8_Oa9RwJVhd1Lj8m/_ssgManifest.js" defer=""></script></head><body style="margin:0;padding:0;height:100%;font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif"><div id="__next" data-reactroot=""><div class="layout_container__8mgcn"><div class="layout_main___EKDi"><div class="nav_container__JcbNx" style="height:52px"><div class="nav_logoLine__kfMLp" style="height:52px"><div class="nav_logo__t9Q2O"><span class="nav_logoIcon__z0OMK"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zM4 12c0-.899.156-1.762.431-2.569L6 11l2 2v2l2 2 1 1v1.931C7.061 19.436 4 16.072 4 12zm14.33 4.873C17.677 16.347 16.687 16 16 16v-1a2 2 0 0 0-2-2h-4v-3a2 2 0 0 0 2-2V7h1a2 2 0 0 0 2-2v-.411C17.928 5.778 20 8.65 20 12a7.947 7.947 0 0 1-1.67 4.873z"></path></svg></span><a href="/">Mint Forge</a></div><div class="nav_menuButton__i3eQv"><div class="nav_closeOrOpen__L3wr_"><div class="nav_handleOne__5ASWS"></div><div class="nav_handleTwo__j5lhy"></div></div></div></div><div class="nav_navItems__S7VIl"><div class="nav_navItem__PgZhl" style="height:48px"><div>category</div></div><div class="nav_navItem__PgZhl" style="height:48px"><div>gallery</div></div><div class="nav_navItem__PgZhl" style="height:48px"><div>mintin</div></div><div class="nav_navItem__PgZhl" style="height:48px"><div><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></div><div></div></div></div></div><div class="article_article__3tTrV"><h1 class="article_title__E6r7y">从头开始写一个 Scriptable 脚本</h1><div class="article_content__5RXjl"><p>iOS 14 发布后，出现了许多提供高定制性的小组件 app。这其中，使用 JS 写脚本的 Scriptable 的定制性不说第一，前三是没问题的。今天给酷友做一个较为详尽的教程，希望大家都能写出自己的优秀脚本。</p>
<h3 id="一、了解-scriptable">一、了解 Scriptable</h3>
<p>官网有基本的介绍，我们可以看到它的基本介绍是 “Automate iOS using JavaScript”，定位上是自动化工具；同时支持 ES6，有很多 iOS 原生的 API，这些 API 是这个 app 的精髓。</p>
<p>打开 app 文档，可以看到文档写的还是非常详尽的。</p>
<p>常用的 API 主要有 Calendar（读取日历）, Device（设备信息）, FileManager（读取文件） 等等。</p>
<p>建议开始写脚本前，把所有的脚本介绍看一下，有个大概的印象，需要用的时候查文档，也知道在哪里找。</p>
<h3 id="二、一个例子">二、一个例子</h3>
<p>现在我们通过一个“天气”的例子，来实战一下。</p>
<h4 id="（一）基本的小组件">（一）基本的小组件</h4>
<pre><code class="language-javascript">const widget = new ListWidget();// 创建一个桌面小组件对象；
// ListWidget 常用的几个添加元素方法有：
// (1)addText   添加文字
// (2)addImage  添加图片
// (3)addStack  添加Stack
// (4)addSpacer 添加空行
// (5)addDate   添加Date
// 方法名都很简单，看就能明白
// 使用上述方法添加的内容，都是水平占一行
widget.addText(&#39;Hello, World!&#39;);// Hello, World! 是编程界的古老传统了
// Script 是全局对象，其常用的方法有：
// (1)setWidget 创建桌面小组件
// (2)complete  结束 Script 对象
Script.setWidget(widget);// 这样，widget 组件就创建成功了
Script.complete();// 最好结束一下
</code></pre>
<p>这一步很简单，我们的第一个小组件完成了！</p>
<h4 id="（二）稍复杂一点的结构">（二）稍复杂一点的结构</h4>
<p>（1）</p>
<p>一个天气组件一般来讲，应该包括：地点、天气图标、天气文字、温度等；</p>
<p>现在我们来按这个简单的标准写一个简单的结构；</p>
<p>(图 carbon2)</p>
<p>完美！天气组件的雏形已经具备了！</p>
<p>（2）</p>
<p>现在我们来调整一下样式：</p>
<p>（图 carbon3）</p>
<p>很好，天气组件的美观度又提升了一点。</p>
</div><div class="to-top_rightBottom__dn0Ea" style="visibility:hidden"><span>回到顶部</span></div></div></div><div class="layout_footer__djSHN"><div class="footer_container__kDTg_"><div class="footer_copyright__J4r4F">© <!-- -->2022<!-- --> All Rights Reserved.</div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"从头开始写一个 Scriptable 脚本","content":"\u003cp\u003eiOS 14 发布后，出现了许多提供高定制性的小组件 app。这其中，使用 JS 写脚本的 Scriptable 的定制性不说第一，前三是没问题的。今天给酷友做一个较为详尽的教程，希望大家都能写出自己的优秀脚本。\u003c/p\u003e\n\u003ch3 id=\"一、了解-scriptable\"\u003e一、了解 Scriptable\u003c/h3\u003e\n\u003cp\u003e官网有基本的介绍，我们可以看到它的基本介绍是 “Automate iOS using JavaScript”，定位上是自动化工具；同时支持 ES6，有很多 iOS 原生的 API，这些 API 是这个 app 的精髓。\u003c/p\u003e\n\u003cp\u003e打开 app 文档，可以看到文档写的还是非常详尽的。\u003c/p\u003e\n\u003cp\u003e常用的 API 主要有 Calendar（读取日历）, Device（设备信息）, FileManager（读取文件） 等等。\u003c/p\u003e\n\u003cp\u003e建议开始写脚本前，把所有的脚本介绍看一下，有个大概的印象，需要用的时候查文档，也知道在哪里找。\u003c/p\u003e\n\u003ch3 id=\"二、一个例子\"\u003e二、一个例子\u003c/h3\u003e\n\u003cp\u003e现在我们通过一个“天气”的例子，来实战一下。\u003c/p\u003e\n\u003ch4 id=\"（一）基本的小组件\"\u003e（一）基本的小组件\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst widget = new ListWidget();// 创建一个桌面小组件对象；\n// ListWidget 常用的几个添加元素方法有：\n// (1)addText   添加文字\n// (2)addImage  添加图片\n// (3)addStack  添加Stack\n// (4)addSpacer 添加空行\n// (5)addDate   添加Date\n// 方法名都很简单，看就能明白\n// 使用上述方法添加的内容，都是水平占一行\nwidget.addText(\u0026#39;Hello, World!\u0026#39;);// Hello, World! 是编程界的古老传统了\n// Script 是全局对象，其常用的方法有：\n// (1)setWidget 创建桌面小组件\n// (2)complete  结束 Script 对象\nScript.setWidget(widget);// 这样，widget 组件就创建成功了\nScript.complete();// 最好结束一下\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e这一步很简单，我们的第一个小组件完成了！\u003c/p\u003e\n\u003ch4 id=\"（二）稍复杂一点的结构\"\u003e（二）稍复杂一点的结构\u003c/h4\u003e\n\u003cp\u003e（1）\u003c/p\u003e\n\u003cp\u003e一个天气组件一般来讲，应该包括：地点、天气图标、天气文字、温度等；\u003c/p\u003e\n\u003cp\u003e现在我们来按这个简单的标准写一个简单的结构；\u003c/p\u003e\n\u003cp\u003e(图 carbon2)\u003c/p\u003e\n\u003cp\u003e完美！天气组件的雏形已经具备了！\u003c/p\u003e\n\u003cp\u003e（2）\u003c/p\u003e\n\u003cp\u003e现在我们来调整一下样式：\u003c/p\u003e\n\u003cp\u003e（图 carbon3）\u003c/p\u003e\n\u003cp\u003e很好，天气组件的美观度又提升了一点。\u003c/p\u003e\n","title":"从头开始写一个 Scriptable 脚本","author":"Kevin Jobs","createAt":"2021-11-09","category":"App","tags":["ios","iPhone","javascript","scriptable"]}},"__N_SSG":true},"page":"/article/[id]","query":{"id":"从头开始写一个 Scriptable 脚本"},"buildId":"DWpsn8_Oa9RwJVhd1Lj8m","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>