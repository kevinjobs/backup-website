<!DOCTYPE html><html style="height:100%"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/efa9a5f6cbf85519.css" as="style"/><link rel="stylesheet" href="/_next/static/css/efa9a5f6cbf85519.css" data-n-g=""/><link rel="preload" href="/_next/static/css/26215bf2d4dea3ac.css" as="style"/><link rel="stylesheet" href="/_next/static/css/26215bf2d4dea3ac.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-514908bffb652963.js" defer=""></script><script src="/_next/static/chunks/framework-6e4ba497ae0c8a3f.js" defer=""></script><script src="/_next/static/chunks/main-e47bb435dabe4202.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4693c3fc7dd43d47.js" defer=""></script><script src="/_next/static/chunks/pages/article/%5Bid%5D-a1c6fdc864b2458f.js" defer=""></script><script src="/_next/static/PkFEy6FbPRKpA-jh48jxe/_buildManifest.js" defer=""></script><script src="/_next/static/PkFEy6FbPRKpA-jh48jxe/_ssgManifest.js" defer=""></script><script src="/_next/static/PkFEy6FbPRKpA-jh48jxe/_middlewareManifest.js" defer=""></script></head><body style="margin:0;padding:0;height:100%"><div id="__next" data-reactroot=""><div class="app_app__3X0V5"><div class="app_nav__6yR3Q"><div class="logo">Mint Forge</div><div class="app_menu__Lm_y_"><ul><li><a href="/">Home</a></li><li><a href="/category">Category</a></li><li><a href="/about">About</a></li></ul></div></div><div class="article_article__3tTrV"><h3 class="article_title__E6r7y">从头开始写一个 Scriptable 脚本</h3><div class="article_content__5RXjl"><p>iOS 14 发布后，出现了许多提供高定制性的小组件 app。这其中，使用 JS 写脚本的 Scriptable 的定制性不说第一，前三是没问题的。今天给酷友做一个较为详尽的教程，希望大家都能写出自己的优秀脚本。</p>
<h3 id="一、了解-scriptable">一、了解 Scriptable</h3>
<p>官网有基本的介绍，我们可以看到它的基本介绍是 “Automate iOS using JavaScript”，定位上是自动化工具；同时支持 ES6，有很多 iOS 原生的 API，这些 API 是这个 app 的精髓。</p>
<p>打开 app 文档，可以看到文档写的还是非常详尽的。</p>
<p>常用的 API 主要有 Calendar（读取日历）, Device（设备信息）, FileManager（读取文件） 等等。</p>
<p>建议开始写脚本前，把所有的脚本介绍看一下，有个大概的印象，需要用的时候查文档，也知道在哪里找。</p>
<h3 id="二、一个例子">二、一个例子</h3>
<p>现在我们通过一个“天气”的例子，来实战一下。</p>
<h4 id="（一）基本的小组件">（一）基本的小组件</h4>
<pre><code class="language-javascript">const widget = new ListWidget();// 创建一个桌面小组件对象；
// ListWidget 常用的几个添加元素方法有：
// (1)addText   添加文字
// (2)addImage  添加图片
// (3)addStack  添加Stack
// (4)addSpacer 添加空行
// (5)addDate   添加Date
// 方法名都很简单，看就能明白
// 使用上述方法添加的内容，都是水平占一行
widget.addText(&#39;Hello, World!&#39;);// Hello, World! 是编程界的古老传统了
// Script 是全局对象，其常用的方法有：
// (1)setWidget 创建桌面小组件
// (2)complete  结束 Script 对象
Script.setWidget(widget);// 这样，widget 组件就创建成功了
Script.complete();// 最好结束一下
</code></pre>
<p>这一步很简单，我们的第一个小组件完成了！</p>
<h4 id="（二）稍复杂一点的结构">（二）稍复杂一点的结构</h4>
<p>（1）</p>
<p>一个天气组件一般来讲，应该包括：地点、天气图标、天气文字、温度等；</p>
<p>现在我们来按这个简单的标准写一个简单的结构；</p>
<p>(图 carbon2)</p>
<p>完美！天气组件的雏形已经具备了！</p>
<p>（2）</p>
<p>现在我们来调整一下样式：</p>
<p>（图 carbon3）</p>
<p>很好，天气组件的美观度又提升了一点。</p>
</div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"从头开始写一个 Scriptable 脚本","content":"\u003cp\u003eiOS 14 发布后，出现了许多提供高定制性的小组件 app。这其中，使用 JS 写脚本的 Scriptable 的定制性不说第一，前三是没问题的。今天给酷友做一个较为详尽的教程，希望大家都能写出自己的优秀脚本。\u003c/p\u003e\n\u003ch3 id=\"一、了解-scriptable\"\u003e一、了解 Scriptable\u003c/h3\u003e\n\u003cp\u003e官网有基本的介绍，我们可以看到它的基本介绍是 “Automate iOS using JavaScript”，定位上是自动化工具；同时支持 ES6，有很多 iOS 原生的 API，这些 API 是这个 app 的精髓。\u003c/p\u003e\n\u003cp\u003e打开 app 文档，可以看到文档写的还是非常详尽的。\u003c/p\u003e\n\u003cp\u003e常用的 API 主要有 Calendar（读取日历）, Device（设备信息）, FileManager（读取文件） 等等。\u003c/p\u003e\n\u003cp\u003e建议开始写脚本前，把所有的脚本介绍看一下，有个大概的印象，需要用的时候查文档，也知道在哪里找。\u003c/p\u003e\n\u003ch3 id=\"二、一个例子\"\u003e二、一个例子\u003c/h3\u003e\n\u003cp\u003e现在我们通过一个“天气”的例子，来实战一下。\u003c/p\u003e\n\u003ch4 id=\"（一）基本的小组件\"\u003e（一）基本的小组件\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst widget = new ListWidget();// 创建一个桌面小组件对象；\n// ListWidget 常用的几个添加元素方法有：\n// (1)addText   添加文字\n// (2)addImage  添加图片\n// (3)addStack  添加Stack\n// (4)addSpacer 添加空行\n// (5)addDate   添加Date\n// 方法名都很简单，看就能明白\n// 使用上述方法添加的内容，都是水平占一行\nwidget.addText(\u0026#39;Hello, World!\u0026#39;);// Hello, World! 是编程界的古老传统了\n// Script 是全局对象，其常用的方法有：\n// (1)setWidget 创建桌面小组件\n// (2)complete  结束 Script 对象\nScript.setWidget(widget);// 这样，widget 组件就创建成功了\nScript.complete();// 最好结束一下\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e这一步很简单，我们的第一个小组件完成了！\u003c/p\u003e\n\u003ch4 id=\"（二）稍复杂一点的结构\"\u003e（二）稍复杂一点的结构\u003c/h4\u003e\n\u003cp\u003e（1）\u003c/p\u003e\n\u003cp\u003e一个天气组件一般来讲，应该包括：地点、天气图标、天气文字、温度等；\u003c/p\u003e\n\u003cp\u003e现在我们来按这个简单的标准写一个简单的结构；\u003c/p\u003e\n\u003cp\u003e(图 carbon2)\u003c/p\u003e\n\u003cp\u003e完美！天气组件的雏形已经具备了！\u003c/p\u003e\n\u003cp\u003e（2）\u003c/p\u003e\n\u003cp\u003e现在我们来调整一下样式：\u003c/p\u003e\n\u003cp\u003e（图 carbon3）\u003c/p\u003e\n\u003cp\u003e很好，天气组件的美观度又提升了一点。\u003c/p\u003e\n","title":"从头开始写一个 Scriptable 脚本","author":"Kevin Jobs","createAt":"2021-11-09"}},"__N_SSG":true},"page":"/article/[id]","query":{"id":"从头开始写一个 Scriptable 脚本"},"buildId":"PkFEy6FbPRKpA-jh48jxe","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>