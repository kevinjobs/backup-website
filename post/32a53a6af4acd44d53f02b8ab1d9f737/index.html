<!DOCTYPE html><html lang="en"><head><meta name="generator" content="React Static"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, shrink-to-fit=no"/><link rel="preload" as="script" href="/templates/styles.74adc604.js"/><link rel="preload" as="script" href="/templates/vendors~main.3d35a505.js"/><link rel="preload" as="script" href="/main.ad859fd8.js"/><link rel="preload" as="style" href="/styles.712164d6.css"/><link rel="stylesheet" href="/styles.712164d6.css"/></head><body><div id="root"><div style="outline:none" tabindex="-1"><nav class="nav"><a href="/"><div class="logo"><span class="logo-1">Mint</span><span class="logo-2">Forge</span></div></a><a href="/about">About</a><a href="/dynamic">Dynamic</a></nav><div class="content"><div style="outline:none" tabindex="-1" type="hash"><div class="post"><h2>从头开始写一个 Scriptable 脚本</h2><div class="createAt"><span>创建于: <!-- -->2021-11-09</span></div><br/><br/><div><p>iOS 14 发布后，出现了许多提供高定制性的小组件 app。这其中，使用 JS 写脚本的 Scriptable 的定制性不说第一，前三是没问题的。今天给酷友做一个较为详尽的教程，希望大家都能写出自己的优秀脚本。</p>
<h3 id="一、了解-scriptable">一、了解 Scriptable</h3>
<p>官网有基本的介绍，我们可以看到它的基本介绍是 “Automate iOS using JavaScript”，定位上是自动化工具；同时支持 ES6，有很多 iOS 原生的 API，这些 API 是这个 app 的精髓。</p>
<p>打开 app 文档，可以看到文档写的还是非常详尽的。</p>
<p>常用的 API 主要有 Calendar（读取日历）, Device（设备信息）, FileManager（读取文件） 等等。</p>
<p>建议开始写脚本前，把所有的脚本介绍看一下，有个大概的印象，需要用的时候查文档，也知道在哪里找。</p>
<h3 id="二、一个例子">二、一个例子</h3>
<p>现在我们通过一个“天气”的例子，来实战一下。</p>
<h4 id="（一）基本的小组件">（一）基本的小组件</h4>
<pre><code class="language-javascript">const widget = new ListWidget();// 创建一个桌面小组件对象；
// ListWidget 常用的几个添加元素方法有：
// (1)addText   添加文字
// (2)addImage  添加图片
// (3)addStack  添加Stack
// (4)addSpacer 添加空行
// (5)addDate   添加Date
// 方法名都很简单，看就能明白
// 使用上述方法添加的内容，都是水平占一行
widget.addText(&#39;Hello, World!&#39;);// Hello, World! 是编程界的古老传统了
// Script 是全局对象，其常用的方法有：
// (1)setWidget 创建桌面小组件
// (2)complete  结束 Script 对象
Script.setWidget(widget);// 这样，widget 组件就创建成功了
Script.complete();// 最好结束一下
</code></pre>
<p>这一步很简单，我们的第一个小组件完成了！</p>
<h4 id="（二）稍复杂一点的结构">（二）稍复杂一点的结构</h4>
<p>（1）</p>
<p>一个天气组件一般来讲，应该包括：地点、天气图标、天气文字、温度等；</p>
<p>现在我们来按这个简单的标准写一个简单的结构；</p>
<p>(图 carbon2)</p>
<p>完美！天气组件的雏形已经具备了！</p>
<p>（2）</p>
<p>现在我们来调整一下样式：</p>
<p>（图 carbon3）</p>
<p>很好，天气组件的美观度又提升了一点。</p>
</div></div></div></div></div></div><script type="text/javascript">window.__routeInfo = JSON.parse("{\"template\":\"__react_static_root__/src/containers/Post\",\"sharedHashesByProp\":{},\"data\":{\"post\":{\"title\":\"\u4ECE\u5934\u5F00\u59CB\u5199\u4E00\u4E2A Scriptable \u811A\u672C\",\"author\":\"Kevin Jobs\",\"createAt\":\"2021-11-09\",\"body\":\"<p>iOS 14 \u53D1\u5E03\u540E\uFF0C\u51FA\u73B0\u4E86\u8BB8\u591A\u63D0\u4F9B\u9AD8\u5B9A\u5236\u6027\u7684\u5C0F\u7EC4\u4EF6 app\u3002\u8FD9\u5176\u4E2D\uFF0C\u4F7F\u7528 JS \u5199\u811A\u672C\u7684 Scriptable \u7684\u5B9A\u5236\u6027\u4E0D\u8BF4\u7B2C\u4E00\uFF0C\u524D\u4E09\u662F\u6CA1\u95EE\u9898\u7684\u3002\u4ECA\u5929\u7ED9\u9177\u53CB\u505A\u4E00\u4E2A\u8F83\u4E3A\u8BE6\u5C3D\u7684\u6559\u7A0B\uFF0C\u5E0C\u671B\u5927\u5BB6\u90FD\u80FD\u5199\u51FA\u81EA\u5DF1\u7684\u4F18\u79C0\u811A\u672C\u3002</p>\\n<h3 id=\\\"\u4E00\u3001\u4E86\u89E3-scriptable\\\">\u4E00\u3001\u4E86\u89E3 Scriptable</h3>\\n<p>\u5B98\u7F51\u6709\u57FA\u672C\u7684\u4ECB\u7ECD\uFF0C\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u5B83\u7684\u57FA\u672C\u4ECB\u7ECD\u662F \u201CAutomate iOS using JavaScript\u201D\uFF0C\u5B9A\u4F4D\u4E0A\u662F\u81EA\u52A8\u5316\u5DE5\u5177\uFF1B\u540C\u65F6\u652F\u6301 ES6\uFF0C\u6709\u5F88\u591A iOS \u539F\u751F\u7684 API\uFF0C\u8FD9\u4E9B API \u662F\u8FD9\u4E2A app \u7684\u7CBE\u9AD3\u3002</p>\\n<p>\u6253\u5F00 app \u6587\u6863\uFF0C\u53EF\u4EE5\u770B\u5230\u6587\u6863\u5199\u7684\u8FD8\u662F\u975E\u5E38\u8BE6\u5C3D\u7684\u3002</p>\\n<p>\u5E38\u7528\u7684 API \u4E3B\u8981\u6709 Calendar\uFF08\u8BFB\u53D6\u65E5\u5386\uFF09, Device\uFF08\u8BBE\u5907\u4FE1\u606F\uFF09, FileManager\uFF08\u8BFB\u53D6\u6587\u4EF6\uFF09 \u7B49\u7B49\u3002</p>\\n<p>\u5EFA\u8BAE\u5F00\u59CB\u5199\u811A\u672C\u524D\uFF0C\u628A\u6240\u6709\u7684\u811A\u672C\u4ECB\u7ECD\u770B\u4E00\u4E0B\uFF0C\u6709\u4E2A\u5927\u6982\u7684\u5370\u8C61\uFF0C\u9700\u8981\u7528\u7684\u65F6\u5019\u67E5\u6587\u6863\uFF0C\u4E5F\u77E5\u9053\u5728\u54EA\u91CC\u627E\u3002</p>\\n<h3 id=\\\"\u4E8C\u3001\u4E00\u4E2A\u4F8B\u5B50\\\">\u4E8C\u3001\u4E00\u4E2A\u4F8B\u5B50</h3>\\n<p>\u73B0\u5728\u6211\u4EEC\u901A\u8FC7\u4E00\u4E2A\u201C\u5929\u6C14\u201D\u7684\u4F8B\u5B50\uFF0C\u6765\u5B9E\u6218\u4E00\u4E0B\u3002</p>\\n<h4 id=\\\"\uFF08\u4E00\uFF09\u57FA\u672C\u7684\u5C0F\u7EC4\u4EF6\\\">\uFF08\u4E00\uFF09\u57FA\u672C\u7684\u5C0F\u7EC4\u4EF6</h4>\\n<pre><code class=\\\"language-javascript\\\">const widget = new ListWidget();// \u521B\u5EFA\u4E00\u4E2A\u684C\u9762\u5C0F\u7EC4\u4EF6\u5BF9\u8C61\uFF1B\\n// ListWidget \u5E38\u7528\u7684\u51E0\u4E2A\u6DFB\u52A0\u5143\u7D20\u65B9\u6CD5\u6709\uFF1A\\n// (1)addText   \u6DFB\u52A0\u6587\u5B57\\n// (2)addImage  \u6DFB\u52A0\u56FE\u7247\\n// (3)addStack  \u6DFB\u52A0Stack\\n// (4)addSpacer \u6DFB\u52A0\u7A7A\u884C\\n// (5)addDate   \u6DFB\u52A0Date\\n// \u65B9\u6CD5\u540D\u90FD\u5F88\u7B80\u5355\uFF0C\u770B\u5C31\u80FD\u660E\u767D\\n// \u4F7F\u7528\u4E0A\u8FF0\u65B9\u6CD5\u6DFB\u52A0\u7684\u5185\u5BB9\uFF0C\u90FD\u662F\u6C34\u5E73\u5360\u4E00\u884C\\nwidget.addText(&#39;Hello, World!&#39;);// Hello, World! \u662F\u7F16\u7A0B\u754C\u7684\u53E4\u8001\u4F20\u7EDF\u4E86\\n// Script \u662F\u5168\u5C40\u5BF9\u8C61\uFF0C\u5176\u5E38\u7528\u7684\u65B9\u6CD5\u6709\uFF1A\\n// (1)setWidget \u521B\u5EFA\u684C\u9762\u5C0F\u7EC4\u4EF6\\n// (2)complete  \u7ED3\u675F Script \u5BF9\u8C61\\nScript.setWidget(widget);// \u8FD9\u6837\uFF0Cwidget \u7EC4\u4EF6\u5C31\u521B\u5EFA\u6210\u529F\u4E86\\nScript.complete();// \u6700\u597D\u7ED3\u675F\u4E00\u4E0B\\n</code></pre>\\n<p>\u8FD9\u4E00\u6B65\u5F88\u7B80\u5355\uFF0C\u6211\u4EEC\u7684\u7B2C\u4E00\u4E2A\u5C0F\u7EC4\u4EF6\u5B8C\u6210\u4E86\uFF01</p>\\n<h4 id=\\\"\uFF08\u4E8C\uFF09\u7A0D\u590D\u6742\u4E00\u70B9\u7684\u7ED3\u6784\\\">\uFF08\u4E8C\uFF09\u7A0D\u590D\u6742\u4E00\u70B9\u7684\u7ED3\u6784</h4>\\n<p>\uFF081\uFF09</p>\\n<p>\u4E00\u4E2A\u5929\u6C14\u7EC4\u4EF6\u4E00\u822C\u6765\u8BB2\uFF0C\u5E94\u8BE5\u5305\u62EC\uFF1A\u5730\u70B9\u3001\u5929\u6C14\u56FE\u6807\u3001\u5929\u6C14\u6587\u5B57\u3001\u6E29\u5EA6\u7B49\uFF1B</p>\\n<p>\u73B0\u5728\u6211\u4EEC\u6765\u6309\u8FD9\u4E2A\u7B80\u5355\u7684\u6807\u51C6\u5199\u4E00\u4E2A\u7B80\u5355\u7684\u7ED3\u6784\uFF1B</p>\\n<p>(\u56FE carbon2)</p>\\n<p>\u5B8C\u7F8E\uFF01\u5929\u6C14\u7EC4\u4EF6\u7684\u96CF\u5F62\u5DF2\u7ECF\u5177\u5907\u4E86\uFF01</p>\\n<p>\uFF082\uFF09</p>\\n<p>\u73B0\u5728\u6211\u4EEC\u6765\u8C03\u6574\u4E00\u4E0B\u6837\u5F0F\uFF1A</p>\\n<p>\uFF08\u56FE carbon3\uFF09</p>\\n<p>\u5F88\u597D\uFF0C\u5929\u6C14\u7EC4\u4EF6\u7684\u7F8E\u89C2\u5EA6\u53C8\u63D0\u5347\u4E86\u4E00\u70B9\u3002</p>\\n\"}},\"path\":\"post/32a53a6af4acd44d53f02b8ab1d9f737\",\"sharedData\":{},\"siteData\":{}}");</script><script defer="" type="text/javascript" src="/templates/styles.74adc604.js"></script><script defer="" type="text/javascript" src="/templates/vendors~main.3d35a505.js"></script><script defer="" type="text/javascript" src="/main.ad859fd8.js"></script></body></html>